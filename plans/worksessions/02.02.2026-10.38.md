### Situation Summary

The current friction in the TUI (Build 678) stems from two main issues that my initial fixes did not fully resolve:

1.  **Shell Wrapper Fragility (`stty` errors)**:
    *   **Problem**: The `stty -echo` call in the command wrapper fails with "Inappropriate ioctl for device" in environments that don't behave like standard terminals. Even with a TTY check, it can still cause the shell to abort or output errors that confuse the agent.
    *   **Fix strategy**: Replace the wrapper with a more robust pattern: `stty -echo 2>/dev/null || true; { cmd; }; stty echo 2>/dev/null || true`. This ensures that even if `stty` fails, the actual command (`pwd`, etc.) always executes.

2.  **Clipboard Dependency Friction**:
    *   **Problem**: The current `arboard` implementation requires external Linux packages (`xclip`, `wl-clipboard`) and a graphical session (`DISPLAY`/`WAYLAND_DISPLAY`). This is causing "shitty dependency" errors and preventing copy-paste in pure terminal environments.
    *   **Proposed Solution**: Switch to **OSC 52 escape sequences**. This is a modern terminal standard that allows the app to copy text by simply sending a specific ANSI code to the terminal. It requires **zero external tools** and works perfectly in VS Code and most modern terminal emulators.

**Plan for next session (after reload):**
1.  Implement **OSC 52** in [`src/terminal/app.rs`](src/terminal/app.rs) to eliminate all external clipboard dependencies.
2.  Refactor [`src/terminal/mod.rs`](src/terminal/mod.rs) to use the simplified "don't-care" shell wrapper and improve echo filtering to be packet-agnostic.
3.  Revert the unnecessary system package requirements in the installation scripts.

Reload when ready, and I will execute this streamlined "no-dependency" path.